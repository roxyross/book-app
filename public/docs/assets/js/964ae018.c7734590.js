"use strict";(globalThis.webpackChunkai_book_platform=globalThis.webpackChunkai_book_platform||[]).push([[7443],{3588(e,n,t){t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"api-reference","title":"API Reference","description":"Overview","source":"@site/docs/api-reference.md","sourceDirName":".","slug":"/api-reference","permalink":"/docs/docs/api-reference","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/api-reference.md","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"sidebar_position":8},"sidebar":"tutorialSidebar","previous":{"title":"Deployment","permalink":"/docs/docs/deployment"}}');var i=t(4848),o=t(8453);const r={sidebar_position:8},l="API Reference",d={},a=[{value:"Overview",id:"overview",level:2},{value:"Backend API (FastAPI) - http://localhost:8000",id:"backend-api-fastapi---httplocalhost8000",level:2},{value:"Authentication Endpoints",id:"authentication-endpoints",level:3},{value:"POST /auth/login",id:"post-authlogin",level:4},{value:"POST /auth/logout",id:"post-authlogout",level:4},{value:"Chat Endpoints",id:"chat-endpoints",level:3},{value:"POST /chat",id:"post-chat",level:4},{value:"Content Management Endpoints",id:"content-management-endpoints",level:3},{value:"POST /load-content",id:"post-load-content",level:4},{value:"Health Check Endpoints",id:"health-check-endpoints",level:3},{value:"GET /",id:"get-",level:4},{value:"GET /health",id:"get-health",level:4},{value:"Frontend API (Next.js) - http://localhost:3000",id:"frontend-api-nextjs---httplocalhost3000",level:2},{value:"Better Auth Endpoints",id:"better-auth-endpoints",level:3},{value:"GET/POST /api/auth/signin",id:"getpost-apiauthsignin",level:4},{value:"GET/POST /api/auth/signout",id:"getpost-apiauthsignout",level:4},{value:"GET/POST /api/auth/signup",id:"getpost-apiauthsignup",level:4},{value:"GET /api/auth/session",id:"get-apiauthsession",level:4},{value:"Frontend Client-Side API Usage",id:"frontend-client-side-api-usage",level:2},{value:"Chat Component API Integration",id:"chat-component-api-integration",level:3},{value:"Authentication Integration",id:"authentication-integration",level:3},{value:"Error Handling",id:"error-handling",level:2},{value:"Backend Error Responses",id:"backend-error-responses",level:3},{value:"HTTP Status Codes",id:"http-status-codes",level:3},{value:"Rate Limiting",id:"rate-limiting",level:2},{value:"Request/Response Formats",id:"requestresponse-formats",level:2},{value:"Common Request Headers",id:"common-request-headers",level:3},{value:"Common Response Headers",id:"common-response-headers",level:3},{value:"Authentication Requirements",id:"authentication-requirements",level:2},{value:"Public Endpoints",id:"public-endpoints",level:3},{value:"Authenticated Endpoints",id:"authenticated-endpoints",level:3},{value:"Content Structure",id:"content-structure",level:2},{value:"MDX Content Format",id:"mdx-content-format",level:3},{value:"Content Processing",id:"content-processing",level:3}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"api-reference",children:"API Reference"})}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(n.p,{children:"This document provides a comprehensive reference for all API endpoints in the AI Book Platform, including both frontend Next.js API routes and backend FastAPI endpoints."}),"\n",(0,i.jsxs)(n.h2,{id:"backend-api-fastapi---httplocalhost8000",children:["Backend API (FastAPI) - ",(0,i.jsx)(n.a,{href:"http://localhost:8000",children:"http://localhost:8000"})]}),"\n",(0,i.jsx)(n.h3,{id:"authentication-endpoints",children:"Authentication Endpoints"}),"\n",(0,i.jsx)(n.h4,{id:"post-authlogin",children:"POST /auth/login"}),"\n",(0,i.jsx)(n.p,{children:"Authenticate a user and receive a JWT token."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Request:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "email": "user@example.com",\n  "password": "user_password"\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "access_token": "jwt_token_here",\n  "token_type": "bearer",\n  "user": {\n    "id": "user_id",\n    "email": "user@example.com",\n    "role": "user"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"post-authlogout",children:"POST /auth/logout"}),"\n",(0,i.jsx)(n.p,{children:"Logout the current user."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "message": "Successfully logged out"\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"chat-endpoints",children:"Chat Endpoints"}),"\n",(0,i.jsx)(n.h4,{id:"post-chat",children:"POST /chat"}),"\n",(0,i.jsx)(n.p,{children:"Send a query to the RAG-powered chatbot."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Headers:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Authorization: Bearer <jwt_token>\nContent-Type: application/json\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Request:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "query": "Your question about AI concepts",\n  "user_id": "optional_user_id"\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "response": "Generated response based on curriculum content",\n  "citations": [\n    {\n      "title": "Source title",\n      "source": "source_file.mdx",\n      "relevance_score": 0.95\n    }\n  ],\n  "user_id": "user_id"\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"content-management-endpoints",children:"Content Management Endpoints"}),"\n",(0,i.jsx)(n.h4,{id:"post-load-content",children:"POST /load-content"}),"\n",(0,i.jsx)(n.p,{children:"Load and index all MDX content into the vector database."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "message": "Content loaded and indexed successfully"\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"health-check-endpoints",children:"Health Check Endpoints"}),"\n",(0,i.jsx)(n.h4,{id:"get-",children:"GET /"}),"\n",(0,i.jsx)(n.p,{children:"Get API information and status."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "message": "AI Book Platform RAG API"\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"get-health",children:"GET /health"}),"\n",(0,i.jsx)(n.p,{children:"Check the health status of the API."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "status": "healthy"\n}\n'})}),"\n",(0,i.jsxs)(n.h2,{id:"frontend-api-nextjs---httplocalhost3000",children:["Frontend API (Next.js) - ",(0,i.jsx)(n.a,{href:"http://localhost:3000",children:"http://localhost:3000"})]}),"\n",(0,i.jsx)(n.h3,{id:"better-auth-endpoints",children:"Better Auth Endpoints"}),"\n",(0,i.jsx)(n.p,{children:"The frontend uses Better Auth which provides the following endpoints:"}),"\n",(0,i.jsx)(n.h4,{id:"getpost-apiauthsignin",children:"GET/POST /api/auth/signin"}),"\n",(0,i.jsx)(n.p,{children:"Handle user sign-in (email/password, OAuth, etc.)"}),"\n",(0,i.jsx)(n.h4,{id:"getpost-apiauthsignout",children:"GET/POST /api/auth/signout"}),"\n",(0,i.jsx)(n.p,{children:"Handle user sign-out"}),"\n",(0,i.jsx)(n.h4,{id:"getpost-apiauthsignup",children:"GET/POST /api/auth/signup"}),"\n",(0,i.jsx)(n.p,{children:"Handle user registration"}),"\n",(0,i.jsx)(n.h4,{id:"get-apiauthsession",children:"GET /api/auth/session"}),"\n",(0,i.jsx)(n.p,{children:"Get current user session information"}),"\n",(0,i.jsx)(n.h2,{id:"frontend-client-side-api-usage",children:"Frontend Client-Side API Usage"}),"\n",(0,i.jsx)(n.h3,{id:"chat-component-api-integration",children:"Chat Component API Integration"}),"\n",(0,i.jsx)(n.p,{children:"The chatbot component makes requests to the backend API:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"const response = await fetch('http://localhost:8000/chat', {\n  method: 'POST',\n  headers: {\n    'Content-Type': 'application/json',\n  },\n  body: JSON.stringify({\n    query: input,\n    user_id: session.user.id,\n  }),\n});\n"})}),"\n",(0,i.jsx)(n.h3,{id:"authentication-integration",children:"Authentication Integration"}),"\n",(0,i.jsx)(n.p,{children:"The frontend uses Better Auth client-side hooks:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"import { useSession } from '@/hooks/useSession';\n\nconst { data: session, isPending } = useSession();\n"})}),"\n",(0,i.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,i.jsx)(n.h3,{id:"backend-error-responses",children:"Backend Error Responses"}),"\n",(0,i.jsx)(n.p,{children:"All backend errors follow this structure:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "detail": "Error message"\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"http-status-codes",children:"HTTP Status Codes"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"200"})," - Success"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"201"})," - Created"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"400"})," - Bad Request"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"401"})," - Unauthorized"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"404"})," - Not Found"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"500"})," - Internal Server Error"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"rate-limiting",children:"Rate Limiting"}),"\n",(0,i.jsx)(n.p,{children:"The backend API includes rate limiting to prevent abuse:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Unauthenticated requests: 100/hour"}),"\n",(0,i.jsx)(n.li,{children:"Authenticated requests: 1000/hour"}),"\n",(0,i.jsx)(n.li,{children:"Chat endpoint: 50/hour per user (to control costs)"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"requestresponse-formats",children:"Request/Response Formats"}),"\n",(0,i.jsx)(n.h3,{id:"common-request-headers",children:"Common Request Headers"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"Content-Type: application/json"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Authorization: Bearer <token>"})," (for protected endpoints)"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"common-response-headers",children:"Common Response Headers"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"Content-Type: application/json"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"X-RateLimit-Limit"}),": Request limit"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"X-RateLimit-Remaining"}),": Remaining requests"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"X-RateLimit-Reset"}),": Time when limit resets"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"authentication-requirements",children:"Authentication Requirements"}),"\n",(0,i.jsx)(n.h3,{id:"public-endpoints",children:"Public Endpoints"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"GET /"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"GET /health"})}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"authenticated-endpoints",children:"Authenticated Endpoints"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"POST /chat"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"POST /load-content"})," (admin only)"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"content-structure",children:"Content Structure"}),"\n",(0,i.jsx)(n.h3,{id:"mdx-content-format",children:"MDX Content Format"}),"\n",(0,i.jsx)(n.p,{children:"The system expects MDX files with frontmatter:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-mdx",children:'---\ntitle: "Content Title"\ndescription: "Content description"\n---\n\n# Content Title\n\n## Topic 1: Topic Title\n\nContent goes here...\n'})}),"\n",(0,i.jsx)(n.h3,{id:"content-processing",children:"Content Processing"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Frontmatter is extracted for metadata"}),"\n",(0,i.jsx)(n.li,{children:"Markdown content is converted to plain text"}),"\n",(0,i.jsx)(n.li,{children:"Text is chunked into ~1000 character segments"}),"\n",(0,i.jsx)(n.li,{children:"Each chunk is embedded and stored with metadata"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453(e,n,t){t.d(n,{R:()=>r,x:()=>l});var s=t(6540);const i={},o=s.createContext(i);function r(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);