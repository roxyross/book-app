"use strict";(globalThis.webpackChunkai_book_platform=globalThis.webpackChunkai_book_platform||[]).push([[9588],{1989(e,n,i){i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"deployment","title":"Deployment","description":"Overview","source":"@site/docs/deployment.md","sourceDirName":".","slug":"/deployment","permalink":"/docs/docs/deployment","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/deployment.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7},"sidebar":"tutorialSidebar","previous":{"title":"Development","permalink":"/docs/docs/development"},"next":{"title":"API Reference","permalink":"/docs/docs/api-reference"}}');var t=i(4848),o=i(8453);const s={sidebar_position:7},l="Deployment",d={},a=[{value:"Overview",id:"overview",level:2},{value:"Architecture Overview",id:"architecture-overview",level:2},{value:"Deployment Options",id:"deployment-options",level:2},{value:"Option 1: All-in-One Deployment",id:"option-1-all-in-one-deployment",level:3},{value:"Option 2: Microservices Deployment",id:"option-2-microservices-deployment",level:3},{value:"Option 3: Container Deployment",id:"option-3-container-deployment",level:3},{value:"Production Configuration",id:"production-configuration",level:2},{value:"Environment Variables",id:"environment-variables",level:3},{value:"Frontend (.env.production)",id:"frontend-envproduction",level:4},{value:"Backend (.env.production)",id:"backend-envproduction",level:4},{value:"Deployment Steps",id:"deployment-steps",level:2},{value:"1. Prepare the Frontend",id:"1-prepare-the-frontend",level:3},{value:"2. Prepare the Backend",id:"2-prepare-the-backend",level:3},{value:"3. Set up Production Database",id:"3-set-up-production-database",level:3},{value:"4. Deploy Frontend",id:"4-deploy-frontend",level:3},{value:"To Vercel (Recommended)",id:"to-vercel-recommended",level:4},{value:"To Other Platforms",id:"to-other-platforms",level:4},{value:"5. Deploy Backend",id:"5-deploy-backend",level:3},{value:"Using PM2 (Node.js server)",id:"using-pm2-nodejs-server",level:4},{value:"Using Docker",id:"using-docker",level:4},{value:"6. Set up Qdrant",id:"6-set-up-qdrant",level:3},{value:"Qdrant Cloud (Recommended for Production)",id:"qdrant-cloud-recommended-for-production",level:4},{value:"Self-hosted Qdrant",id:"self-hosted-qdrant",level:4},{value:"SSL/HTTPS Configuration",id:"sslhttps-configuration",level:2},{value:"Using Let&#39;s Encrypt",id:"using-lets-encrypt",level:3},{value:"Nginx Configuration",id:"nginx-configuration",level:3},{value:"Performance Optimization",id:"performance-optimization",level:2},{value:"Frontend Optimizations",id:"frontend-optimizations",level:3},{value:"Backend Optimizations",id:"backend-optimizations",level:3},{value:"Vector Database Optimizations",id:"vector-database-optimizations",level:3},{value:"Monitoring and Maintenance",id:"monitoring-and-maintenance",level:2},{value:"Health Checks",id:"health-checks",level:3},{value:"Logging",id:"logging",level:3},{value:"Backup Strategy",id:"backup-strategy",level:3},{value:"Scaling Considerations",id:"scaling-considerations",level:2},{value:"Horizontal Scaling",id:"horizontal-scaling",level:3},{value:"Vertical Scaling",id:"vertical-scaling",level:3},{value:"Security Best Practices",id:"security-best-practices",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"deployment",children:"Deployment"})}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsx)(n.p,{children:"This guide provides instructions for deploying the AI Book Platform to production environments. The platform consists of three main components that can be deployed separately or together depending on your infrastructure preferences."}),"\n",(0,t.jsx)(n.h2,{id:"architecture-overview",children:"Architecture Overview"}),"\n",(0,t.jsx)(n.p,{children:"The AI Book Platform consists of:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Frontend"}),": Next.js application (runs on port 3000 by default)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Backend"}),": FastAPI RAG system (runs on port 8000 by default)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Vector Database"}),": Qdrant (runs on port 6333 by default)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Authentication Database"}),": SQLite/PostgreSQL for Better Auth"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"deployment-options",children:"Deployment Options"}),"\n",(0,t.jsx)(n.h3,{id:"option-1-all-in-one-deployment",children:"Option 1: All-in-One Deployment"}),"\n",(0,t.jsx)(n.p,{children:"Deploy all components on a single server or container platform."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Requirements:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Server with at least 4GB RAM"}),"\n",(0,t.jsx)(n.li,{children:"Node.js, Python, and Docker installed"}),"\n",(0,t.jsx)(n.li,{children:"SSL certificate for HTTPS"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"option-2-microservices-deployment",children:"Option 2: Microservices Deployment"}),"\n",(0,t.jsx)(n.p,{children:"Deploy each component separately for better scalability."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Components:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Frontend on Vercel/Netlify"}),"\n",(0,t.jsx)(n.li,{children:"Backend on AWS/GCP/Azure"}),"\n",(0,t.jsx)(n.li,{children:"Qdrant on Qdrant Cloud or self-hosted"}),"\n",(0,t.jsx)(n.li,{children:"Database on managed service"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"option-3-container-deployment",children:"Option 3: Container Deployment"}),"\n",(0,t.jsx)(n.p,{children:"Use Docker containers for all components."}),"\n",(0,t.jsx)(n.h2,{id:"production-configuration",children:"Production Configuration"}),"\n",(0,t.jsx)(n.h3,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,t.jsx)(n.h4,{id:"frontend-envproduction",children:"Frontend (.env.production)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-env",children:"# Production URL\nNEXT_PUBLIC_APP_URL=https://your-domain.com\nNEXT_PUBLIC_BETTER_AUTH_URL=https://your-domain.com\n\n# Better Auth\nBETTER_AUTH_SECRET=your-production-secret-key\nDATABASE_URL=postgresql://user:password@db-host:5432/ai_book_platform\n\n# Analytics (optional)\nNEXT_PUBLIC_ANALYTICS_ID=your-analytics-id\n"})}),"\n",(0,t.jsx)(n.h4,{id:"backend-envproduction",children:"Backend (.env.production)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-env",children:"# API Keys\nCOHERE_API_KEY=your-production-cohere-api-key\nJWT_SECRET=your-production-jwt-secret\n\n# Vector Database\nQDRANT_URL=your-qdrant-url.com\nQDRANT_API_KEY=your-qdrant-api-key\nQDRANT_PORT=6333\n\n# Production settings\nENVIRONMENT=production\nLOG_LEVEL=info\n"})}),"\n",(0,t.jsx)(n.h2,{id:"deployment-steps",children:"Deployment Steps"}),"\n",(0,t.jsx)(n.h3,{id:"1-prepare-the-frontend",children:"1. Prepare the Frontend"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cd book-app\nnpm run build\n"})}),"\n",(0,t.jsx)(n.h3,{id:"2-prepare-the-backend",children:"2. Prepare the Backend"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cd backend\npip install -r requirements.txt\n"})}),"\n",(0,t.jsx)(n.h3,{id:"3-set-up-production-database",children:"3. Set up Production Database"}),"\n",(0,t.jsx)(n.p,{children:"For production, consider using PostgreSQL instead of SQLite:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Install PostgreSQL and create database\ncreatedb ai_book_platform\n"})}),"\n",(0,t.jsx)(n.p,{children:"Update the Better Auth configuration to use PostgreSQL."}),"\n",(0,t.jsx)(n.h3,{id:"4-deploy-frontend",children:"4. Deploy Frontend"}),"\n",(0,t.jsx)(n.h4,{id:"to-vercel-recommended",children:"To Vercel (Recommended)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npm install -g vercel\nvercel --prod\n"})}),"\n",(0,t.jsx)(n.h4,{id:"to-other-platforms",children:"To Other Platforms"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Netlify"}),": Use the build command ",(0,t.jsx)(n.code,{children:"npm run build"})," and publish directory ",(0,t.jsx)(n.code,{children:"out"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"AWS S3"}),": Build and deploy the static files"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Traditional Server"}),": Serve the built files with nginx or Apache"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"5-deploy-backend",children:"5. Deploy Backend"}),"\n",(0,t.jsx)(n.h4,{id:"using-pm2-nodejs-server",children:"Using PM2 (Node.js server)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'npm install -g pm2\npm2 start "cd backend && python main.py" --name "ai-book-backend"\n'})}),"\n",(0,t.jsx)(n.h4,{id:"using-docker",children:"Using Docker"}),"\n",(0,t.jsxs)(n.p,{children:["Create a ",(0,t.jsx)(n.code,{children:"Dockerfile"})," for the backend:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dockerfile",children:'FROM python:3.11-slim\n\nWORKDIR /app\nCOPY backend/requirements.txt .\nRUN pip install -r requirements.txt\n\nCOPY backend/ .\n\nEXPOSE 8000\nCMD ["python", "main.py"]\n'})}),"\n",(0,t.jsx)(n.p,{children:"Build and run:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker build -t ai-book-backend .\ndocker run -d -p 8000:8000 --env-file .env ai-book-backend\n"})}),"\n",(0,t.jsx)(n.h3,{id:"6-set-up-qdrant",children:"6. Set up Qdrant"}),"\n",(0,t.jsx)(n.h4,{id:"qdrant-cloud-recommended-for-production",children:"Qdrant Cloud (Recommended for Production)"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Sign up at ",(0,t.jsx)(n.a,{href:"https://qdrant.tech",children:"qdrant.tech"})]}),"\n",(0,t.jsx)(n.li,{children:"Create a new cluster"}),"\n",(0,t.jsx)(n.li,{children:"Get your URL and API key"}),"\n",(0,t.jsx)(n.li,{children:"Update your backend configuration"}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"self-hosted-qdrant",children:"Self-hosted Qdrant"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker run -d --name qdrant-container -p 6333:6333 -v $(pwd)/qdrant_storage:/qdrant/storage qdrant/qdrant\n"})}),"\n",(0,t.jsx)(n.h2,{id:"sslhttps-configuration",children:"SSL/HTTPS Configuration"}),"\n",(0,t.jsx)(n.h3,{id:"using-lets-encrypt",children:"Using Let's Encrypt"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"sudo apt-get install certbot python3-certbot-nginx\nsudo certbot --nginx -d your-domain.com\n"})}),"\n",(0,t.jsx)(n.h3,{id:"nginx-configuration",children:"Nginx Configuration"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-nginx",children:"server {\n    listen 443 ssl http2;\n    server_name your-domain.com;\n\n    ssl_certificate /path/to/certificate.crt;\n    ssl_certificate_key /path/to/private.key;\n\n    location / {\n        proxy_pass http://localhost:3000;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n\n    location /api/ {\n        proxy_pass http://localhost:8000;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"performance-optimization",children:"Performance Optimization"}),"\n",(0,t.jsx)(n.h3,{id:"frontend-optimizations",children:"Frontend Optimizations"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Image Optimization"}),": Use Next.js Image component"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Code Splitting"}),": Leverage Next.js automatic splitting"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Caching"}),": Implement proper HTTP caching headers"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"CDN"}),": Use a CDN for static assets"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"backend-optimizations",children:"Backend Optimizations"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Database Indexing"}),": Properly index Qdrant collections"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Caching"}),": Implement Redis for frequently accessed data"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Load Balancing"}),": Use multiple backend instances"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Monitoring"}),": Set up health checks and monitoring"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"vector-database-optimizations",children:"Vector Database Optimizations"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Collection Configuration"}),": Optimize for your query patterns"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Hardware"}),": Use appropriate instance types for your data size"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Replication"}),": Set up replicas for high availability"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Monitoring"}),": Monitor query performance and resource usage"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"monitoring-and-maintenance",children:"Monitoring and Maintenance"}),"\n",(0,t.jsx)(n.h3,{id:"health-checks",children:"Health Checks"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Frontend: ",(0,t.jsx)(n.code,{children:"/health"})," endpoint"]}),"\n",(0,t.jsxs)(n.li,{children:["Backend: ",(0,t.jsx)(n.code,{children:"/health"})," endpoint"]}),"\n",(0,t.jsxs)(n.li,{children:["Qdrant: ",(0,t.jsx)(n.code,{children:"/"})," endpoint"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"logging",children:"Logging"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Set up structured logging"}),"\n",(0,t.jsx)(n.li,{children:"Centralize logs using services like ELK stack"}),"\n",(0,t.jsx)(n.li,{children:"Monitor error rates and performance metrics"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"backup-strategy",children:"Backup Strategy"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Database Backup"}),": Regular PostgreSQL backups"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Content Backup"}),": Version control for MDX files"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Vector Database"}),": Qdrant storage backup"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Configuration"}),": Version control for environment files"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"scaling-considerations",children:"Scaling Considerations"}),"\n",(0,t.jsx)(n.h3,{id:"horizontal-scaling",children:"Horizontal Scaling"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Frontend: CDN and static hosting"}),"\n",(0,t.jsx)(n.li,{children:"Backend: Multiple instances behind load balancer"}),"\n",(0,t.jsx)(n.li,{children:"Database: Read replicas and connection pooling"}),"\n",(0,t.jsx)(n.li,{children:"Vector DB: Qdrant cluster mode"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"vertical-scaling",children:"Vertical Scaling"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Increase server resources (CPU/RAM)"}),"\n",(0,t.jsx)(n.li,{children:"Optimize database queries"}),"\n",(0,t.jsx)(n.li,{children:"Implement caching layers"}),"\n",(0,t.jsx)(n.li,{children:"Use content delivery networks"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"security-best-practices",children:"Security Best Practices"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"HTTPS"}),": Always use HTTPS in production"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Secrets"}),": Use environment variables for secrets"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Authentication"}),": Implement proper session management"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Input Validation"}),": Validate all user inputs"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Rate Limiting"}),": Implement API rate limiting"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Security Headers"}),": Add security headers to responses"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453(e,n,i){i.d(n,{R:()=>s,x:()=>l});var r=i(6540);const t={},o=r.createContext(t);function s(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);